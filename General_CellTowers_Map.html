<!DOCTYPE html>
 <html>
 <head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Общая карта вышек (обновлено 29.01.2026, 21:32:06)</title>
  <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
  <style>
    body, html { margin: 0; padding: 0; width: 100%; height: 100%; font-family: Arial, sans-serif; }
    #map { width: 100%; height: 100%; }
    .balloon { padding: 10px; max-width: 300px; }
    .balloon-title { font-weight: bold; margin-bottom: 5px; color: #1a73e8; }
    .balloon-row { margin-bottom: 3px; }
    .update-info {
      position: absolute;
      bottom: 10px;
      right: 10px;
      background: white;
      padding: 5px 10px;
      border-radius: 3px;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
      font-size: 12px;
      z-index: 100;
    }
    .sidebar {
      position: absolute;
      top: 50px;
      left: 10px;
      background: white;
      padding: 10px;
      border-radius: 3px;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
      z-index: 100;
      width: 200px;
    }
    .tab-list {
      list-style: none;
      padding: 0;
      display: flex;
      margin-bottom: 10px;
    }
    .tab-list li {
      margin-right: 10px;
      cursor: pointer;
      color: #1a73e8;
    }
    .filter-list {
      list-style: none;
      padding: 0;
    }
    input[type="text"] {
      width: 100%;
      padding: 5px;
      margin-bottom: 5px;
      box-sizing: border-box;
    }
    button {
      width: 100%;
      padding: 5px;
      margin-bottom: 10px;
      background: #1a73e8;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background: #0d5bcd;
    }
    #menu-button {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 100;
      background: white;
      border: none;
      font-size: 20px;
      cursor: pointer;
      padding: 5px 10px;
      border-radius: 3px;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>

<!-- Записал стиль сразу в тег, так как не отображался корректно через css -->

  <button id="menu-button", style="width: 120px; height: 30px; color: black; margin-top: 31px;">≡</button>
  <div class="sidebar" id="sidebar", style="display: none; margin-top: 25px;">
    <h3>Управление картой</h3>
    <ul class="tab-list">
      <li>Вышки</li>
      <li>Блоки</li>
      <li>O2R</li>
    </ul>
    <input type="text" id="search-input" placeholder="Найти">
    <button id="search-button">Найти</button>
    <input type="text" id="add-input" placeholder="Добавить точку">
    <button id="add-button">Добавить</button>
    <ul class="filter-list">
      <li><label><input type="checkbox" id="tower-checkbox" checked> Вышки</label></li>
      <li><label><input type="checkbox" id="block-checkbox"> Координаты клиента</label></li>
      <li><label><input type="checkbox" id="o2r-checkbox" checked> O2R</label></li>
      <li><label><input type="checkbox" id="user-checkbox" checked> Ваша точка</label></li>
    </ul>
  </div>
  <div id="map"></div>
  <div class="update-info">Обновлено: 29.01.2026, 21:32:06</div>
    <script>
    ymaps.ready(function() {
      const points = [{"coords":[55.429035,37.762814],"color":"islands#redIcon","source":"Nissan Qashqai т499кв797, moscow","radius":null,"type":"yandex","vehicleName":"Nissan Qashqai т499кв797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Nissan Qashqai т499кв797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Nissan Qashqai т499кв797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.429035, 37.762814</div></div></div>"},{"coords":[55.426075,37.763069],"color":"islands#blueIcon","source":"Nissan Qashqai т499кв797, moscow","radius":null,"type":"user","vehicleName":"Nissan Qashqai т499кв797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Nissan Qashqai т499кв797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Nissan Qashqai т499кв797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.426075, 37.763069</div></div></div>"},{"coords":[45.100891,38.906391],"color":"islands#redIcon","source":"Haval Jolion Elite к329вк797, krasnodar","radius":null,"type":"yandex","vehicleName":"Haval Jolion Elite к329вк797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Haval Jolion Elite к329вк797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Haval Jolion Elite к329вк797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.100891, 38.906391</div></div></div>"},{"coords":[45.106315,38.785802],"color":"islands#blueIcon","source":"Haval Jolion Elite к329вк797, krasnodar","radius":null,"type":"user","vehicleName":"Haval Jolion Elite к329вк797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Haval Jolion Elite к329вк797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Haval Jolion Elite к329вк797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.106315, 38.785802</div></div></div>"},{"coords":[55.817368,37.364075],"color":"islands#redIcon","source":"Geely Coolray о691мт797, moscow","radius":null,"type":"yandex","vehicleName":"Geely Coolray о691мт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Coolray о691мт797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Coolray о691мт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.817368, 37.364075</div></div></div>"},{"coords":[55.8846,37.406457],"color":"islands#blueIcon","source":"Geely Coolray о691мт797, moscow","radius":null,"type":"user","vehicleName":"Geely Coolray о691мт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Coolray о691мт797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Coolray о691мт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.884600, 37.406457</div></div></div>"},{"coords":[55.712574,37.589916],"color":"islands#redIcon","source":"Geely Coolray р657нх797, moscow","radius":null,"type":"yandex","vehicleName":"Geely Coolray р657нх797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Coolray р657нх797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Coolray р657нх797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.712574, 37.589916</div></div></div>"},{"coords":[55.696875,37.560958],"color":"islands#blueIcon","source":"Geely Coolray р657нх797, moscow","radius":null,"type":"user","vehicleName":"Geely Coolray р657нх797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Coolray р657нх797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Coolray р657нх797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.696875, 37.560958</div></div></div>"},{"coords":[55.793026,37.474842],"color":"islands#redIcon","source":"Москвич 3 в579нт797, moscow","radius":null,"type":"yandex","vehicleName":"Москвич 3 в579нт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Москвич 3 в579нт797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Москвич 3 в579нт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.793026, 37.474842</div></div></div>"},{"coords":[55.974312,37.413587],"color":"islands#blueIcon","source":"Москвич 3 в579нт797, moscow","radius":null,"type":"user","vehicleName":"Москвич 3 в579нт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Москвич 3 в579нт797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Москвич 3 в579нт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.974312, 37.413587</div></div></div>"},{"coords":[59.872437,30.464277],"color":"islands#redIcon","source":"Chery Tiggo 7 Pro а052ов797, saint_petersburg","radius":null,"type":"yandex","vehicleName":"Chery Tiggo 7 Pro а052ов797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro а052ов797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro а052ов797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.872437, 30.464277</div></div></div>"},{"coords":[59.871238,30.472737],"color":"islands#blueIcon","source":"Chery Tiggo 7 Pro а052ов797, saint_petersburg","radius":null,"type":"user","vehicleName":"Chery Tiggo 7 Pro а052ов797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro а052ов797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro а052ов797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.871238, 30.472737</div></div></div>"},{"coords":[55.712532,37.6217],"color":"islands#redIcon","source":"Haval H3 н081тв797, moscow","radius":null,"type":"yandex","vehicleName":"Haval H3 н081тв797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Haval H3 н081тв797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Haval H3 н081тв797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.712532, 37.621700</div></div></div>"},{"coords":[55.720435,37.618707],"color":"islands#blueIcon","source":"Haval H3 н081тв797, moscow","radius":null,"type":"user","vehicleName":"Haval H3 н081тв797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Haval H3 н081тв797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Haval H3 н081тв797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.720435, 37.618707</div></div></div>"},{"coords":[55.7421,37.58532],"color":"islands#redIcon","source":"Chery Tiggo 7 Pro м538оо797, moscow","radius":null,"type":"yandex","vehicleName":"Chery Tiggo 7 Pro м538оо797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro м538оо797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro м538оо797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.742100, 37.585320</div></div></div>"},{"coords":[55.762091,37.575614],"color":"islands#blueIcon","source":"Chery Tiggo 7 Pro м538оо797, moscow","radius":null,"type":"user","vehicleName":"Chery Tiggo 7 Pro м538оо797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro м538оо797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro м538оо797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.762091, 37.575614</div></div></div>"},{"coords":[59.748695,30.321465],"color":"islands#redIcon","source":"Haval Jolion Elite т652нх797, saint_petersburg","radius":null,"type":"yandex","vehicleName":"Haval Jolion Elite т652нх797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Haval Jolion Elite т652нх797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Haval Jolion Elite т652нх797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.748695, 30.321465</div></div></div>"},{"coords":[59.896161,30.646572],"color":"islands#blueIcon","source":"Haval Jolion Elite т652нх797, saint_petersburg","radius":null,"type":"user","vehicleName":"Haval Jolion Elite т652нх797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Haval Jolion Elite т652нх797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Haval Jolion Elite т652нх797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.896161, 30.646572</div></div></div>"},{"coords":[55.757462,37.57843],"color":"islands#redIcon","source":"Chery Arrizo 8 к653ру797, moscow","radius":null,"type":"yandex","vehicleName":"Chery Arrizo 8 к653ру797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Arrizo 8 к653ру797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Arrizo 8 к653ру797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.757462, 37.578430</div></div></div>"},{"coords":[55.756207,37.580845],"color":"islands#blueIcon","source":"Chery Arrizo 8 к653ру797, moscow","radius":null,"type":"user","vehicleName":"Chery Arrizo 8 к653ру797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Arrizo 8 к653ру797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Arrizo 8 к653ру797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.756207, 37.580845</div></div></div>"},{"coords":[37.102623,55.975147],"color":"islands#redIcon","source":"Chery Tiggo 4 м628мв797, moscow","radius":null,"type":"yandex","vehicleName":"Chery Tiggo 4 м628мв797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 4 м628мв797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 4 м628мв797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 37.102623, 55.975147</div></div></div>"},{"coords":[37.102898,55.975796],"color":"islands#blueIcon","source":"Chery Tiggo 4 м628мв797, moscow","radius":null,"type":"user","vehicleName":"Chery Tiggo 4 м628мв797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 4 м628мв797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 4 м628мв797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 37.102898, 55.975796</div></div></div>"},{"coords":[45.153904,38.981331],"color":"islands#redIcon","source":"Chery Tiggo 7 Pro н866вм797, krasnodar","radius":null,"type":"yandex","vehicleName":"Chery Tiggo 7 Pro н866вм797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro н866вм797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro н866вм797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.153904, 38.981331</div></div></div>"},{"coords":[45.175099,38.980896],"color":"islands#blueIcon","source":"Chery Tiggo 7 Pro н866вм797, krasnodar","radius":null,"type":"user","vehicleName":"Chery Tiggo 7 Pro н866вм797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro н866вм797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro н866вм797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.175099, 38.980896</div></div></div>"},{"coords":[56.811348,60.561657],"color":"islands#redIcon","source":"Haval Jolion Elite у124ку797, ekaterinburg","radius":null,"type":"yandex","vehicleName":"Haval Jolion Elite у124ку797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Haval Jolion Elite у124ку797, ekaterinburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Haval Jolion Elite у124ку797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 56.811348, 60.561657</div></div></div>"},{"coords":[56.810969,60.573224],"color":"islands#blueIcon","source":"Haval Jolion Elite у124ку797, ekaterinburg","radius":null,"type":"user","vehicleName":"Haval Jolion Elite у124ку797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Haval Jolion Elite у124ку797, ekaterinburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Haval Jolion Elite у124ку797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 56.810969, 60.573224</div></div></div>"},{"coords":[45.092533,38.90517],"color":"islands#redIcon","source":"Skoda Rapid н537кн797, krasnodar","radius":null,"type":"yandex","vehicleName":"Skoda Rapid н537кн797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Skoda Rapid н537кн797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Skoda Rapid н537кн797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.092533, 38.905170</div></div></div>"},{"coords":[45.068183,38.909907],"color":"islands#blueIcon","source":"Skoda Rapid н537кн797, krasnodar","radius":null,"type":"user","vehicleName":"Skoda Rapid н537кн797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Skoda Rapid н537кн797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Skoda Rapid н537кн797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.068183, 38.909907</div></div></div>"},{"coords":[37.468288,55.808357],"color":"islands#redIcon","source":"Chery Arrizo 8 р261то797, moscow","radius":null,"type":"yandex","vehicleName":"Chery Arrizo 8 р261то797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Arrizo 8 р261то797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Arrizo 8 р261то797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 37.468288, 55.808357</div></div></div>"},{"coords":[59.88995,30.506891],"color":"islands#redIcon","source":"Kia Soul м212кс797, saint_petersburg","radius":null,"type":"yandex","vehicleName":"Kia Soul м212кс797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Kia Soul м212кс797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Kia Soul м212кс797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.889950, 30.506891</div></div></div>"},{"coords":[59.895952,30.505922],"color":"islands#blueIcon","source":"Kia Soul м212кс797, saint_petersburg","radius":null,"type":"user","vehicleName":"Kia Soul м212кс797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Kia Soul м212кс797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Kia Soul м212кс797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.895952, 30.505922</div></div></div>"},{"coords":[59.553268,30.797203],"color":"islands#redIcon","source":"Kia Soul у867ка797, saint_petersburg","radius":null,"type":"yandex","vehicleName":"Kia Soul у867ка797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Kia Soul у867ка797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Kia Soul у867ка797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.553268, 30.797203</div></div></div>"},{"coords":[59.549333,30.859613],"color":"islands#blueIcon","source":"Kia Soul у867ка797, saint_petersburg","radius":null,"type":"user","vehicleName":"Kia Soul у867ка797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Kia Soul у867ка797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Kia Soul у867ка797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.549333, 30.859613</div></div></div>"},{"coords":[55.745144,37.627525],"color":"islands#redIcon","source":"Jac JS6 к070мт797, moscow","radius":null,"type":"yandex","vehicleName":"Jac JS6 к070мт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Jac JS6 к070мт797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Jac JS6 к070мт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.745144, 37.627525</div></div></div>"},{"coords":[55.754788,37.671355],"color":"islands#blueIcon","source":"Jac JS6 к070мт797, moscow","radius":null,"type":"user","vehicleName":"Jac JS6 к070мт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Jac JS6 к070мт797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Jac JS6 к070мт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.754788, 37.671355</div></div></div>"},{"coords":[55.744884,37.556171],"color":"islands#redIcon","source":"Chery Tiggo 7 Pro м981он797, moscow","radius":null,"type":"yandex","vehicleName":"Chery Tiggo 7 Pro м981он797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro м981он797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro м981он797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.744884, 37.556171</div></div></div>"},{"coords":[55.7426,37.549062],"color":"islands#blueIcon","source":"Chery Tiggo 7 Pro м981он797, moscow","radius":null,"type":"user","vehicleName":"Chery Tiggo 7 Pro м981он797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro м981он797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro м981он797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.742600, 37.549062</div></div></div>"},{"coords":[43.464203,39.901806],"color":"islands#redIcon","source":"Chery Tiggo 7 Pro р543нр797, sochi","radius":null,"type":"yandex","vehicleName":"Chery Tiggo 7 Pro р543нр797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro р543нр797, sochi</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro р543нр797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 43.464203, 39.901806</div></div></div>"},{"coords":[43.468376,39.900241],"color":"islands#blueIcon","source":"Chery Tiggo 7 Pro р543нр797, sochi","radius":null,"type":"user","vehicleName":"Chery Tiggo 7 Pro р543нр797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro р543нр797, sochi</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro р543нр797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 43.468376, 39.900241</div></div></div>"},{"coords":[55.611809,37.742882],"color":"islands#redIcon","source":"Exeed LX р189му797, moscow","radius":null,"type":"yandex","vehicleName":"Exeed LX р189му797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Exeed LX р189му797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Exeed LX р189му797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.611809, 37.742882</div></div></div>"},{"coords":[55.613648,37.733608],"color":"islands#blueIcon","source":"Exeed LX р189му797, moscow","radius":null,"type":"user","vehicleName":"Exeed LX р189му797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Exeed LX р189му797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Exeed LX р189му797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.613648, 37.733608</div></div></div>"},{"coords":[55.804718,37.45039],"color":"islands#redIcon","source":"Exeed LX р656мт797, moscow","radius":null,"type":"yandex","vehicleName":"Exeed LX р656мт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Exeed LX р656мт797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Exeed LX р656мт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.804718, 37.450390</div></div></div>"},{"coords":[55.814371,37.422876],"color":"islands#blueIcon","source":"Exeed LX р656мт797, moscow","radius":null,"type":"user","vehicleName":"Exeed LX р656мт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Exeed LX р656мт797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Exeed LX р656мт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.814371, 37.422876</div></div></div>"},{"coords":[59.957218,30.385939],"color":"islands#redIcon","source":"Geely Coolray у262мв797, saint_petersburg","radius":null,"type":"yandex","vehicleName":"Geely Coolray у262мв797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Coolray у262мв797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Coolray у262мв797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.957218, 30.385939</div></div></div>"},{"coords":[59.960043,30.391949],"color":"islands#blueIcon","source":"Geely Coolray у262мв797, saint_petersburg","radius":null,"type":"user","vehicleName":"Geely Coolray у262мв797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Coolray у262мв797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Coolray у262мв797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.960043, 30.391949</div></div></div>"},{"coords":[39.933071,43.425209],"color":"islands#redIcon","source":"Changan UNI-S к347рс797, sochi","radius":null,"type":"yandex","vehicleName":"Changan UNI-S к347рс797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Changan UNI-S к347рс797, sochi</div><div class=\"balloon-row\"><strong>Машина:</strong> Changan UNI-S к347рс797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 39.933071, 43.425209</div></div></div>"},{"coords":[59.535084,30.156549],"color":"islands#redIcon","source":"Citroen C4 к902ке797, saint_petersburg","radius":null,"type":"yandex","vehicleName":"Citroen C4 к902ке797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Citroen C4 к902ке797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Citroen C4 к902ке797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.535084, 30.156549</div></div></div>"},{"coords":[59.558114,30.198752],"color":"islands#blueIcon","source":"Citroen C4 к902ке797, saint_petersburg","radius":null,"type":"user","vehicleName":"Citroen C4 к902ке797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Citroen C4 к902ке797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Citroen C4 к902ке797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.558114, 30.198752</div></div></div>"},{"coords":[55.761787,37.685783],"color":"islands#redIcon","source":"Coolray (BelGee) у993тн797, moscow","radius":null,"type":"yandex","vehicleName":"Coolray (BelGee) у993тн797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) у993тн797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) у993тн797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.761787, 37.685783</div></div></div>"},{"coords":[55.760374,37.690861],"color":"islands#blueIcon","source":"Coolray (BelGee) у993тн797, moscow","radius":null,"type":"user","vehicleName":"Coolray (BelGee) у993тн797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) у993тн797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) у993тн797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.760374, 37.690861</div></div></div>"},{"coords":[59.858093,30.510071],"color":"islands#redIcon","source":"Chery Tiggo 7 Pro р385но797, saint_petersburg","radius":null,"type":"yandex","vehicleName":"Chery Tiggo 7 Pro р385но797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro р385но797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro р385но797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.858093, 30.510071</div></div></div>"},{"coords":[59.862261,30.513094],"color":"islands#blueIcon","source":"Chery Tiggo 7 Pro р385но797, saint_petersburg","radius":null,"type":"user","vehicleName":"Chery Tiggo 7 Pro р385но797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro р385но797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro р385но797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.862261, 30.513094</div></div></div>"},{"coords":[55.760025,37.566624],"color":"islands#redIcon","source":"Haval Jolion Elite е509вк797, moscow","radius":null,"type":"yandex","vehicleName":"Haval Jolion Elite е509вк797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Haval Jolion Elite е509вк797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Haval Jolion Elite е509вк797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.760025, 37.566624</div></div></div>"},{"coords":[55.760103,37.566884],"color":"islands#blueIcon","source":"Haval Jolion Elite е509вк797, moscow","radius":null,"type":"user","vehicleName":"Haval Jolion Elite е509вк797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Haval Jolion Elite е509вк797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Haval Jolion Elite е509вк797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.760103, 37.566884</div></div></div>"},{"coords":[59.705109,30.395647],"color":"islands#redIcon","source":"Geely Atlas Pro а640нр797, saint_petersburg","radius":null,"type":"yandex","vehicleName":"Geely Atlas Pro а640нр797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Atlas Pro а640нр797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Atlas Pro а640нр797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.705109, 30.395647</div></div></div>"},{"coords":[59.70594,30.387162],"color":"islands#blueIcon","source":"Geely Atlas Pro а640нр797, saint_petersburg","radius":null,"type":"user","vehicleName":"Geely Atlas Pro а640нр797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Atlas Pro а640нр797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Atlas Pro а640нр797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.705940, 30.387162</div></div></div>"},{"coords":[55.956585,37.412636],"color":"islands#redIcon","source":"Changan CS55 Plus к044ов797, moscow","radius":null,"type":"yandex","vehicleName":"Changan CS55 Plus к044ов797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Changan CS55 Plus к044ов797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Changan CS55 Plus к044ов797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.956585, 37.412636</div></div></div>"},{"coords":[55.960202,37.407363],"color":"islands#blueIcon","source":"Changan CS55 Plus к044ов797, moscow","radius":null,"type":"user","vehicleName":"Changan CS55 Plus к044ов797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Changan CS55 Plus к044ов797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Changan CS55 Plus к044ов797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.960202, 37.407363</div></div></div>"},{"coords":[55.872986,37.320549],"color":"islands#redIcon","source":"Changan UNI-T о788рв797, moscow","radius":null,"type":"yandex","vehicleName":"Changan UNI-T о788рв797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Changan UNI-T о788рв797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Changan UNI-T о788рв797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.872986, 37.320549</div></div></div>"},{"coords":[55.877037,37.313347],"color":"islands#blueIcon","source":"Changan UNI-T о788рв797, moscow","radius":null,"type":"user","vehicleName":"Changan UNI-T о788рв797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Changan UNI-T о788рв797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Changan UNI-T о788рв797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.877037, 37.313347</div></div></div>"},{"coords":[55.745857,37.714252],"color":"islands#redIcon","source":"Nissan Qashqai т051ка797, moscow","radius":null,"type":"yandex","vehicleName":"Nissan Qashqai т051ка797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Nissan Qashqai т051ка797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Nissan Qashqai т051ка797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.745857, 37.714252</div></div></div>"},{"coords":[55.763523,37.731578],"color":"islands#blueIcon","source":"Nissan Qashqai т051ка797, moscow","radius":null,"type":"user","vehicleName":"Nissan Qashqai т051ка797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Nissan Qashqai т051ка797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Nissan Qashqai т051ка797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.763523, 37.731578</div></div></div>"},{"coords":[30.533527,60.027046],"color":"islands#redIcon","source":"Coolray (BelGee) о268нк797, saint_petersburg","radius":null,"type":"yandex","vehicleName":"Coolray (BelGee) о268нк797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) о268нк797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) о268нк797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 30.533527, 60.027046</div></div></div>"},{"coords":[30.422583,60.050743],"color":"islands#blueIcon","source":"Coolray (BelGee) о268нк797, saint_petersburg","radius":null,"type":"user","vehicleName":"Coolray (BelGee) о268нк797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) о268нк797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) о268нк797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 30.422583, 60.050743</div></div></div>"},{"coords":[55.721512,37.462864],"color":"islands#redIcon","source":"Exeed LX р708мт797, moscow","radius":null,"type":"yandex","vehicleName":"Exeed LX р708мт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Exeed LX р708мт797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Exeed LX р708мт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.721512, 37.462864</div></div></div>"},{"coords":[55.720608,37.463369],"color":"islands#blueIcon","source":"Exeed LX р708мт797, moscow","radius":null,"type":"user","vehicleName":"Exeed LX р708мт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Exeed LX р708мт797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Exeed LX р708мт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.720608, 37.463369</div></div></div>"},{"coords":[45.106575,38.958103],"color":"islands#redIcon","source":"Renault Kaptur у049во797, krasnodar","radius":null,"type":"yandex","vehicleName":"Renault Kaptur у049во797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Renault Kaptur у049во797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Renault Kaptur у049во797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.106575, 38.958103</div></div></div>"},{"coords":[45.104682,38.952119],"color":"islands#blueIcon","source":"Renault Kaptur у049во797, krasnodar","radius":null,"type":"user","vehicleName":"Renault Kaptur у049во797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Renault Kaptur у049во797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Renault Kaptur у049во797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.104682, 38.952119</div></div></div>"},{"coords":[55.744133,37.627384],"color":"islands#redIcon","source":"Geely Coolray р746нр797, moscow","radius":null,"type":"yandex","vehicleName":"Geely Coolray р746нр797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Coolray р746нр797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Coolray р746нр797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.744133, 37.627384</div></div></div>"},{"coords":[60.076393,30.265913],"color":"islands#redIcon","source":"Coolray (BelGee) т659се797, saint_petersburg","radius":null,"type":"yandex","vehicleName":"Coolray (BelGee) т659се797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) т659се797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) т659се797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 60.076393, 30.265913</div></div></div>"},{"coords":[60.07119,30.263161],"color":"islands#blueIcon","source":"Coolray (BelGee) т659се797, saint_petersburg","radius":null,"type":"user","vehicleName":"Coolray (BelGee) т659се797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) т659се797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) т659се797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 60.071190, 30.263161</div></div></div>"},{"coords":[43.616264,39.737053],"color":"islands#redIcon","source":"Changan UNI-T в437рр797, sochi","radius":null,"type":"yandex","vehicleName":"Changan UNI-T в437рр797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Changan UNI-T в437рр797, sochi</div><div class=\"balloon-row\"><strong>Машина:</strong> Changan UNI-T в437рр797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 43.616264, 39.737053</div></div></div>"},{"coords":[43.619165,39.729481],"color":"islands#blueIcon","source":"Changan UNI-T в437рр797, sochi","radius":null,"type":"user","vehicleName":"Changan UNI-T в437рр797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Changan UNI-T в437рр797, sochi</div><div class=\"balloon-row\"><strong>Машина:</strong> Changan UNI-T в437рр797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 43.619165, 39.729481</div></div></div>"},{"coords":[59.985218,30.224277],"color":"islands#redIcon","source":"Chery Tiggo 7 Pro т626мо797, saint_petersburg","radius":null,"type":"yandex","vehicleName":"Chery Tiggo 7 Pro т626мо797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro т626мо797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro т626мо797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.985218, 30.224277</div></div></div>"},{"coords":[59.983827,30.216318],"color":"islands#blueIcon","source":"Chery Tiggo 7 Pro т626мо797, saint_petersburg","radius":null,"type":"user","vehicleName":"Chery Tiggo 7 Pro т626мо797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro т626мо797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro т626мо797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.983827, 30.216318</div></div></div>"},{"coords":[55.803947,37.761086],"color":"islands#redIcon","source":"Jac JS6 к093мт797, moscow","radius":null,"type":"yandex","vehicleName":"Jac JS6 к093мт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Jac JS6 к093мт797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Jac JS6 к093мт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.803947, 37.761086</div></div></div>"},{"coords":[55.798022,37.752205],"color":"islands#blueIcon","source":"Jac JS6 к093мт797, moscow","radius":null,"type":"user","vehicleName":"Jac JS6 к093мт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Jac JS6 к093мт797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Jac JS6 к093мт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.798022, 37.752205</div></div></div>"},{"coords":[45.04369,39.038506],"color":"islands#redIcon","source":"Nissan Qashqai р137кх797, krasnodar","radius":null,"type":"yandex","vehicleName":"Nissan Qashqai р137кх797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Nissan Qashqai р137кх797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Nissan Qashqai р137кх797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.043690, 39.038506</div></div></div>"},{"coords":[45.033248,39.073251],"color":"islands#blueIcon","source":"Nissan Qashqai р137кх797, krasnodar","radius":null,"type":"user","vehicleName":"Nissan Qashqai р137кх797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Nissan Qashqai р137кх797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Nissan Qashqai р137кх797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.033248, 39.073251</div></div></div>"},{"coords":[59.97007,30.333652],"color":"islands#redIcon","source":"GAC GS3 с492см797, saint_petersburg","radius":null,"type":"yandex","vehicleName":"GAC GS3 с492см797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">GAC GS3 с492см797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> GAC GS3 с492см797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.970070, 30.333652</div></div></div>"},{"coords":[59.976102,30.330846],"color":"islands#blueIcon","source":"GAC GS3 с492см797, saint_petersburg","radius":null,"type":"user","vehicleName":"GAC GS3 с492см797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">GAC GS3 с492см797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> GAC GS3 с492см797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.976102, 30.330846</div></div></div>"},{"coords":[55.660072,37.77422],"color":"islands#redIcon","source":"Coolray (BelGee) т593то797, moscow","radius":null,"type":"yandex","vehicleName":"Coolray (BelGee) т593то797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) т593то797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) т593то797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.660072, 37.774220</div></div></div>"},{"coords":[55.650091,37.767228],"color":"islands#blueIcon","source":"Coolray (BelGee) т593то797, moscow","radius":null,"type":"user","vehicleName":"Coolray (BelGee) т593то797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) т593то797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) т593то797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.650091, 37.767228</div></div></div>"},{"coords":[59.909458,30.523912],"color":"islands#redIcon","source":"Exeed LX н464нх797, saint_petersburg","radius":null,"type":"yandex","vehicleName":"Exeed LX н464нх797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Exeed LX н464нх797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Exeed LX н464нх797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.909458, 30.523912</div></div></div>"},{"coords":[59.915009,30.51719],"color":"islands#blueIcon","source":"Exeed LX н464нх797, saint_petersburg","radius":null,"type":"user","vehicleName":"Exeed LX н464нх797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Exeed LX н464нх797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Exeed LX н464нх797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.915009, 30.517190</div></div></div>"},{"coords":[43.517502,39.857643],"color":"islands#redIcon","source":"Chery Tiggo 7 Pro е915на797, sochi","radius":null,"type":"yandex","vehicleName":"Chery Tiggo 7 Pro е915на797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro е915на797, sochi</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro е915на797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 43.517502, 39.857643</div></div></div>"},{"coords":[43.519166,39.843159],"color":"islands#blueIcon","source":"Chery Tiggo 7 Pro е915на797, sochi","radius":null,"type":"user","vehicleName":"Chery Tiggo 7 Pro е915на797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro е915на797, sochi</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro е915на797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 43.519166, 39.843159</div></div></div>"},{"coords":[37.6031,55.609955],"color":"islands#redIcon","source":"Geely Coolray с132нм797, moscow","radius":null,"type":"yandex","vehicleName":"Geely Coolray с132нм797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Coolray с132нм797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Coolray с132нм797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 37.603100, 55.609955</div></div></div>"},{"coords":[37.690567,55.775604],"color":"islands#blueIcon","source":"Geely Coolray с132нм797, moscow","radius":null,"type":"user","vehicleName":"Geely Coolray с132нм797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Coolray с132нм797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Coolray с132нм797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 37.690567, 55.775604</div></div></div>"},{"coords":[45.018814,39.032425],"color":"islands#redIcon","source":"Renault Kaptur с661ке797, krasnodar","radius":null,"type":"yandex","vehicleName":"Renault Kaptur с661ке797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Renault Kaptur с661ке797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Renault Kaptur с661ке797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.018814, 39.032425</div></div></div>"},{"coords":[45.023569,39.040326],"color":"islands#blueIcon","source":"Renault Kaptur с661ке797, krasnodar","radius":null,"type":"user","vehicleName":"Renault Kaptur с661ке797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Renault Kaptur с661ке797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Renault Kaptur с661ке797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.023569, 39.040326</div></div></div>"},{"coords":[59.800812,30.390486],"color":"islands#redIcon","source":"Renault Arkana в385км797, saint_petersburg","radius":null,"type":"yandex","vehicleName":"Renault Arkana в385км797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Renault Arkana в385км797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Renault Arkana в385км797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.800812, 30.390486</div></div></div>"},{"coords":[59.802235,30.38119],"color":"islands#blueIcon","source":"Renault Arkana в385км797, saint_petersburg","radius":null,"type":"user","vehicleName":"Renault Arkana в385км797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Renault Arkana в385км797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Renault Arkana в385км797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.802235, 30.381190</div></div></div>"},{"coords":[55.740635,37.614925],"color":"islands#redIcon","source":"Coolray (BelGee) к467тк797, moscow","radius":null,"type":"yandex","vehicleName":"Coolray (BelGee) к467тк797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) к467тк797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) к467тк797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.740635, 37.614925</div></div></div>"},{"coords":[55.738373,37.607312],"color":"islands#blueIcon","source":"Coolray (BelGee) к467тк797, moscow","radius":null,"type":"user","vehicleName":"Coolray (BelGee) к467тк797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) к467тк797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) к467тк797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.738373, 37.607312</div></div></div>"},{"coords":[43.443184,39.920261],"color":"islands#redIcon","source":"Changan CS35 PLUS о092нм797, sochi","radius":null,"type":"yandex","vehicleName":"Changan CS35 PLUS о092нм797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Changan CS35 PLUS о092нм797, sochi</div><div class=\"balloon-row\"><strong>Машина:</strong> Changan CS35 PLUS о092нм797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 43.443184, 39.920261</div></div></div>"},{"coords":[43.439184,39.915048],"color":"islands#blueIcon","source":"Changan CS35 PLUS о092нм797, sochi","radius":null,"type":"user","vehicleName":"Changan CS35 PLUS о092нм797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Changan CS35 PLUS о092нм797, sochi</div><div class=\"balloon-row\"><strong>Машина:</strong> Changan CS35 PLUS о092нм797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 43.439184, 39.915048</div></div></div>"},{"coords":[37.518654,55.901596],"color":"islands#redIcon","source":"Exeed LX т433нн797, moscow","radius":null,"type":"yandex","vehicleName":"Exeed LX т433нн797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Exeed LX т433нн797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Exeed LX т433нн797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 37.518654, 55.901596</div></div></div>"},{"coords":[37.519531,55.900665],"color":"islands#blueIcon","source":"Exeed LX т433нн797, moscow","radius":null,"type":"user","vehicleName":"Exeed LX т433нн797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Exeed LX т433нн797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Exeed LX т433нн797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 37.519531, 55.900665</div></div></div>"},{"coords":[59.986118,30.330221],"color":"islands#redIcon","source":"Geely Coolray Flagship у296мв797, saint_petersburg","radius":null,"type":"yandex","vehicleName":"Geely Coolray Flagship у296мв797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Coolray Flagship у296мв797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Coolray Flagship у296мв797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.986118, 30.330221</div></div></div>"},{"coords":[59.984764,30.321446],"color":"islands#blueIcon","source":"Geely Coolray Flagship у296мв797, saint_petersburg","radius":null,"type":"user","vehicleName":"Geely Coolray Flagship у296мв797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Coolray Flagship у296мв797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Coolray Flagship у296мв797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.984764, 30.321446</div></div></div>"},{"coords":[45.13026,38.933819],"color":"islands#redIcon","source":"Kia Rio р568км797, krasnodar","radius":null,"type":"yandex","vehicleName":"Kia Rio р568км797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Kia Rio р568км797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Kia Rio р568км797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.130260, 38.933819</div></div></div>"},{"coords":[45.113844,38.91973],"color":"islands#blueIcon","source":"Kia Rio р568км797, krasnodar","radius":null,"type":"user","vehicleName":"Kia Rio р568км797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Kia Rio р568км797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Kia Rio р568км797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.113844, 38.919730</div></div></div>"},{"coords":[59.894306,30.511795],"color":"islands#redIcon","source":"Coolray (BelGee) х841сх797, saint_petersburg","radius":null,"type":"yandex","vehicleName":"Coolray (BelGee) х841сх797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) х841сх797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) х841сх797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.894306, 30.511795</div></div></div>"},{"coords":[59.898615,30.505789],"color":"islands#blueIcon","source":"Coolray (BelGee) х841сх797, saint_petersburg","radius":null,"type":"user","vehicleName":"Coolray (BelGee) х841сх797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) х841сх797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) х841сх797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.898615, 30.505789</div></div></div>"},{"coords":[45.076633,38.898579],"color":"islands#redIcon","source":"Skoda Rapid в525ке797, krasnodar","radius":null,"type":"yandex","vehicleName":"Skoda Rapid в525ке797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Skoda Rapid в525ке797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Skoda Rapid в525ке797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.076633, 38.898579</div></div></div>"},{"coords":[45.079793,38.894338],"color":"islands#blueIcon","source":"Skoda Rapid в525ке797, krasnodar","radius":null,"type":"user","vehicleName":"Skoda Rapid в525ке797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Skoda Rapid в525ке797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Skoda Rapid в525ке797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.079793, 38.894338</div></div></div>"},{"coords":[55.587505,37.736328],"color":"islands#redIcon","source":"GAC GS3 е855тх797, moscow","radius":null,"type":"yandex","vehicleName":"GAC GS3 е855тх797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">GAC GS3 е855тх797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> GAC GS3 е855тх797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.587505, 37.736328</div></div></div>"},{"coords":[55.639362,37.795857],"color":"islands#blueIcon","source":"GAC GS3 е855тх797, moscow","radius":null,"type":"user","vehicleName":"GAC GS3 е855тх797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">GAC GS3 е855тх797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> GAC GS3 е855тх797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.639362, 37.795857</div></div></div>"},{"coords":[55.739368,37.626744],"color":"islands#redIcon","source":"Coolray (BelGee) е246то797, moscow","radius":null,"type":"yandex","vehicleName":"Coolray (BelGee) е246то797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) е246то797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) е246то797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.739368, 37.626744</div></div></div>"},{"coords":[59.563187,30.119081],"color":"islands#redIcon","source":"Renault Kaptur м964ке797, saint_petersburg","radius":null,"type":"yandex","vehicleName":"Renault Kaptur м964ке797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Renault Kaptur м964ке797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Renault Kaptur м964ке797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.563187, 30.119081</div></div></div>"},{"coords":[59.559235,30.124371],"color":"islands#blueIcon","source":"Renault Kaptur м964ке797, saint_petersburg","radius":null,"type":"user","vehicleName":"Renault Kaptur м964ке797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Renault Kaptur м964ке797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Renault Kaptur м964ке797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.559235, 30.124371</div></div></div>"},{"coords":[60.037399,30.221283],"color":"islands#redIcon","source":"Renault Arkana е940вк797, saint_petersburg","radius":null,"type":"yandex","vehicleName":"Renault Arkana е940вк797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Renault Arkana е940вк797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Renault Arkana е940вк797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 60.037399, 30.221283</div></div></div>"},{"coords":[60.040525,30.207469],"color":"islands#blueIcon","source":"Renault Arkana е940вк797, saint_petersburg","radius":null,"type":"user","vehicleName":"Renault Arkana е940вк797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Renault Arkana е940вк797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Renault Arkana е940вк797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 60.040525, 30.207469</div></div></div>"},{"coords":[55.725974,37.580962],"color":"islands#redIcon","source":"Geely Coolray New н648рт797, moscow","radius":null,"type":"yandex","vehicleName":"Geely Coolray New н648рт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Coolray New н648рт797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Coolray New н648рт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.725974, 37.580962</div></div></div>"},{"coords":[45.091953,38.90929],"color":"islands#redIcon","source":"Kia Rio о985кн797, krasnodar","radius":null,"type":"yandex","vehicleName":"Kia Rio о985кн797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Kia Rio о985кн797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Kia Rio о985кн797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.091953, 38.909290</div></div></div>"},{"coords":[45.106888,38.787097],"color":"islands#blueIcon","source":"Kia Rio о985кн797, krasnodar","radius":null,"type":"user","vehicleName":"Kia Rio о985кн797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Kia Rio о985кн797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Kia Rio о985кн797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.106888, 38.787097</div></div></div>"},{"coords":[55.81424,37.69714],"color":"islands#redIcon","source":"Changan UNI-T о261рв797, moscow","radius":null,"type":"yandex","vehicleName":"Changan UNI-T о261рв797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Changan UNI-T о261рв797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Changan UNI-T о261рв797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.814240, 37.697140</div></div></div>"},{"coords":[55.816364,37.708089],"color":"islands#blueIcon","source":"Changan UNI-T о261рв797, moscow","radius":null,"type":"user","vehicleName":"Changan UNI-T о261рв797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Changan UNI-T о261рв797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Changan UNI-T о261рв797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.816364, 37.708089</div></div></div>"},{"coords":[60.03471,30.216238],"color":"islands#redIcon","source":"Renault Arkana н641кх797, saint_petersburg","radius":null,"type":"yandex","vehicleName":"Renault Arkana н641кх797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Renault Arkana н641кх797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Renault Arkana н641кх797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 60.034710, 30.216238</div></div></div>"},{"coords":[60.036619,30.203376],"color":"islands#blueIcon","source":"Renault Arkana н641кх797, saint_petersburg","radius":null,"type":"user","vehicleName":"Renault Arkana н641кх797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Renault Arkana н641кх797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Renault Arkana н641кх797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 60.036619, 30.203376</div></div></div>"},{"coords":[37.572517,55.421982],"color":"islands#redIcon","source":"Coolray (BelGee) н136ро797, moscow","radius":null,"type":"yandex","vehicleName":"Coolray (BelGee) н136ро797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) н136ро797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) н136ро797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 37.572517, 55.421982</div></div></div>"},{"coords":[37.614643,55.53389],"color":"islands#blueIcon","source":"Coolray (BelGee) н136ро797, moscow","radius":null,"type":"user","vehicleName":"Coolray (BelGee) н136ро797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) н136ро797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) н136ро797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 37.614643, 55.533890</div></div></div>"},{"coords":[45.029274,39.08429],"color":"islands#redIcon","source":"Skoda Rapid в577ке797, krasnodar","radius":null,"type":"yandex","vehicleName":"Skoda Rapid в577ке797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Skoda Rapid в577ке797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Skoda Rapid в577ке797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.029274, 39.084290</div></div></div>"},{"coords":[45.027668,39.089821],"color":"islands#blueIcon","source":"Skoda Rapid в577ке797, krasnodar","radius":null,"type":"user","vehicleName":"Skoda Rapid в577ке797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Skoda Rapid в577ке797, krasnodar</div><div class=\"balloon-row\"><strong>Машина:</strong> Skoda Rapid в577ке797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 45.027668, 39.089821</div></div></div>"}];

        function decodeHtml(html) {
        const txt = document.createElement("textarea");
        txt.innerHTML = html;
        return txt.value;
      }
      
      const map = new ymaps.Map("map", {
        center: [55.751574, 37.573856],
        zoom: 10
      });
      
      const towerClusterer = new ymaps.Clusterer({preset: 'islands#redClusterIcons'});
      const towerCircles = new ymaps.GeoObjectCollection();
      const blockClusterer = new ymaps.Clusterer({preset: 'islands#blueClusterIcons'});
      const o2rClusterer = new ymaps.Clusterer({preset: 'islands#violetClusterIcons'});
      const userCollection = new ymaps.GeoObjectCollection();

      const circleStorage = new Map();
      const circleVisibilityState = new Map();

      console.log('=== ДЕБАГГИНГ ===');
      console.log('Всего точек:', points.length);

      function toggleCircle(coordsKey, show = true) {
        const circle = circleStorage.get(coordsKey);
        if (circle) {
          if (show) {
            map.geoObjects.add(circle);
          } else {
            map.geoObjects.remove(circle);
          }
        }
      }
      
      if (points && points.length > 0) {
        points.forEach(function(point) {
          if (!point.coords || !Array.isArray(point.coords)) return;

          if (point.radius && point.type.includes("yandex")) {
            const circle = new ymaps.Circle([

              point.coords,
              point.radius

            ], {}, {
              fillColor: "#FF0000",
              fillOpacity: 0.1,
              strokeColor: "#FF0000",
              strokeOpacity: 0.8,
              strokeWidth: 2
            });

            const coordsKey = point.coords.join(',');
            circleStorage.set(coordsKey, circle);
          }
          

          const placemark = new ymaps.Placemark(
            point.coords,
            {
              balloonContentHeader: '<div class="balloon-title">' + decodeHtml(point.source || '') + '</div>',
              balloonContentBody: point.balloonHtml ? decodeHtml(point.balloonHtml) : '',
              hintContent: decodeHtml(point.source || '')
            },
            {
              preset: point.type === 'user' ? 'islands#blueIcon' : 'islands#redCircleIcon',
              balloonCloseButton: true,
              balloonMaxWidth: 300
            }
          );

          let collection;
          if (point.type === 'yandex') {
            collection = towerClusterer;
          } else if (point.type === 'user') {
            collection = blockClusterer;
          } else {
            collection = o2rClusterer;
          }
          collection.add(placemark);
        });
        
        map.geoObjects.add(towerClusterer);
        map.geoObjects.add(o2rClusterer);
        map.geoObjects.add(userCollection);
        
        map.setBounds(map.geoObjects.getBounds(), { checkZoomRange: true });
      }
      
      document.addEventListener('click', function(e) {
        if (e.target.classList.contains('radius-toggle-btn')) {
          e.preventDefault();
          e.stopPropagation();

          const coordsStr = e.target.getAttribute('data-coords');
          const action = e.target.getAttribute('data-action');

          const circle = circleStorage.get(coordsStr);

          if (circle) {
            if (action === 'show') {
              map.geoObjects.add(circle);
              e.target.textContent = 'Скрыть радиус';
              e.target.setAttribute('data-action', 'hide');
              e.target.style.background = '#ff4444';
              circleVisibilityState.set(coordsStr, true);
            } else {
              map.geoObjects.remove(circle);
              e.target.textContent = 'Показать радиус';
              e.target.setAttribute('data-action', 'show');
              e.target.style.background = '#1a73e8';
              circleVisibilityState.set(coordsStr, false);
            }
            updateAllButtonsForCoords(coordsStr);
          }
        }
      });

      function updateAllButtonsForCoords(coordsStr) {
        const buttons = document.querySelectorAll('.radius-toggle-btn');
        const isVisible = circleVisibilityState.get(coordsStr) || false;
    
        buttons.forEach(button => {
          if (button.getAttribute('data-coords') === coordsStr) {
            if (isVisible) {
              button.textContent = 'Скрыть радиус';
              button.setAttribute('data-action', 'hide');
              button.style.background = '#ff4444';
            } else {
              button.textContent = 'Показать радиус';
              button.setAttribute('data-action', 'show');
              button.style.background = '#1a73e8';
            }
          }
        });
      }

      map.geoObjects.events.add('balloonopen', function(e) {
        setTimeout(function() {
          const balloon = document.querySelector('.ymaps-balloon');
          if (balloon) {
            const buttons = balloon.querySelectorAll('.radius-toggle-btn');
            buttons.forEach(button => {
              const coordsStr = button.getAttribute('data-coords');
              const isVisible = circleVisibilityState.get(coordsStr) || false;
              
              if (isVisible) {
                button.textContent = 'Скрыть радиус';
                button.setAttribute('data-action', 'hide');
                button.style.background = '#ff4444';
              }
              // Если не видим, оставляем исходное состояние "Показать радиус"
            });
          }
        }, 50);
      }); 
      

      document.getElementById('tower-checkbox').addEventListener('change', function(e) {
        if (e.target.checked) {
          map.geoObjects.add(towerClusterer);
        } else {
          map.geoObjects.remove(towerClusterer);
          circleStorage.forEach((circle, coordsKey) => {
            map.geoObjects.remove(circle);
            circleVisibilityState.set(coordsKey, false);
          });
        }
      });
      
      document.getElementById('block-checkbox').addEventListener('change', function(e) {
        if (e.target.checked) {
          map.geoObjects.add(blockClusterer);
        } else {
          map.geoObjects.remove(blockClusterer);
        }
      });
      
      document.getElementById('o2r-checkbox').addEventListener('change', function(e) {
        if (e.target.checked) {
          map.geoObjects.add(o2rClusterer);
        } else {
          map.geoObjects.remove(o2rClusterer);
        }
      });
      
      document.getElementById('user-checkbox').addEventListener('change', function(e) {
        if (e.target.checked) {
          map.geoObjects.add(userCollection);
        } else {
          map.geoObjects.remove(userCollection);
        }
      });
      
      document.getElementById('search-button').addEventListener('click', function() {
        const address = document.getElementById('search-input').value.trim();
        if (!address) return;
        ymaps.geocode(address, { results: 1 }).then(function(res) {
          const first = res.geoObjects.get(0);
          if (first) {
            map.setCenter(first.geometry.getCoordinates(), 15);
          }
        });
      });
      
      document.getElementById('add-button').addEventListener('click', function() {
        const input = document.getElementById('add-input').value.trim();
        if (!input) return;
        const match = input.match(/([\d.]+)\s*,\s*([\d.]+)/);
        if (match) {
          const lat = parseFloat(match[1]);
          const lon = parseFloat(match[2]);
          addUserPoint([lat, lon], 'Ваша точка');
        } else {
          ymaps.geocode(input, { results: 1 }).then(function(res) {
            const first = res.geoObjects.get(0);
            if (first) {
              const coords = first.geometry.getCoordinates();
              addUserPoint(coords, first.getAddressLine());
            }
          });
        }
      });
      
      function addUserPoint(coords, source) {
        const placemark = new ymaps.Placemark(coords, {
          balloonContentHeader: source,
          balloonContentBody: `Координаты: ${coords[0].toFixed(6)}, ${coords[1].toFixed(6)}`,
          hintContent: source
        }, {
          preset: 'islands#blueIcon'
        });
        userCollection.add(placemark);
        map.setCenter(coords, 15);
        if (!document.getElementById('user-checkbox').checked) {
          document.getElementById('user-checkbox').checked = true;
          map.geoObjects.add(userCollection);
        }
      }
      
      const sidebar = document.getElementById('sidebar');
      sidebar.style.display = 'none';
      document.getElementById('menu-button').addEventListener('click', function() {
        sidebar.style.display = sidebar.style.display === 'none' ? 'block' : 'none';
      });

      function initBalloonObserver() {
        const observer = new MutationObserver(function(mutations) {
          mutations.forEach(function(mutation) {
            if (mutation.addedNodes.length) {
              mutation.addedNodes.forEach(function(node) {
                if (node.nodeType === 1) {
                  const buttons = node.querySelectorAll ? node.querySelectorAll('.radius-toggle-btn') : [];
                  buttons.forEach(button => {
                    const coordsStr = button.getAttribute('data-coords');
                    const isVisible = circleVisibilityState.get(coordsStr) || false;
                    
                    console.log('Наблюдатель: найдена кнопка', coordsStr, 'видим:', isVisible);
                    
                    if (isVisible) {
                      button.textContent = 'Скрыть радиус';
                      button.setAttribute('data-action', 'hide');
                      button.style.background = '#ff4444';
                    }
                  });
                }
              });
            }
          });
        });

        observer.observe(document.body, {
          childList: true,
          subtree: true
        });
      }

      setTimeout(initBalloonObserver, 1000);
    });
  </script>
</body>
</html>
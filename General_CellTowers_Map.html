<!DOCTYPE html>
 <html>
 <head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Общая карта вышек (обновлено 15.11.2025, 08:32:04)</title>
  <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
  <style>
    body, html { margin: 0; padding: 0; width: 100%; height: 100%; font-family: Arial, sans-serif; }
    #map { width: 100%; height: 100%; }
    .balloon { padding: 10px; max-width: 300px; }
    .balloon-title { font-weight: bold; margin-bottom: 5px; color: #1a73e8; }
    .balloon-row { margin-bottom: 3px; }
    .update-info {
      position: absolute;
      bottom: 10px;
      right: 10px;
      background: white;
      padding: 5px 10px;
      border-radius: 3px;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
      font-size: 12px;
      z-index: 100;
    }
    .sidebar {
      position: absolute;
      top: 50px;
      left: 10px;
      background: white;
      padding: 10px;
      border-radius: 3px;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
      z-index: 100;
      width: 200px;
    }
    .tab-list {
      list-style: none;
      padding: 0;
      display: flex;
      margin-bottom: 10px;
    }
    .tab-list li {
      margin-right: 10px;
      cursor: pointer;
      color: #1a73e8;
    }
    .filter-list {
      list-style: none;
      padding: 0;
    }
    input[type="text"] {
      width: 100%;
      padding: 5px;
      margin-bottom: 5px;
      box-sizing: border-box;
    }
    button {
      width: 100%;
      padding: 5px;
      margin-bottom: 10px;
      background: #1a73e8;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background: #0d5bcd;
    }
    #menu-button {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 100;
      background: white;
      border: none;
      font-size: 20px;
      cursor: pointer;
      padding: 5px 10px;
      border-radius: 3px;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>

<!-- Записал стиль сразу в тег, так как не отображался корректно через css -->

  <button id="menu-button", style="width: 120px; height: 30px; color: black; margin-top: 31px;">≡</button>
  <div class="sidebar" id="sidebar", style="display: none; margin-top: 25px;">
    <h3>Управление картой</h3>
    <ul class="tab-list">
      <li>Вышки</li>
      <li>Блоки</li>
      <li>O2R</li>
    </ul>
    <input type="text" id="search-input" placeholder="Найти">
    <button id="search-button">Найти</button>
    <input type="text" id="add-input" placeholder="Добавить точку">
    <button id="add-button">Добавить</button>
    <ul class="filter-list">
      <li><label><input type="checkbox" id="tower-checkbox" checked> Вышки</label></li>
      <li><label><input type="checkbox" id="block-checkbox"> Координаты клиента</label></li>
      <li><label><input type="checkbox" id="o2r-checkbox" checked> O2R</label></li>
      <li><label><input type="checkbox" id="user-checkbox" checked> Ваша точка</label></li>
    </ul>
  </div>
  <div id="map"></div>
  <div class="update-info">Обновлено: 15.11.2025, 08:32:04</div>
    <script>
    ymaps.ready(function() {
      const points = [{"coords":[55.740002,37.633301],"color":"islands#redIcon","source":"GAC GS3 т363тр797, moscow","radius":554,"type":"yandex","vehicleName":"GAC GS3 т363тр797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">GAC GS3 т363тр797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> GAC GS3 т363тр797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.740002, 37.633301</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.740002,37.633301\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.734455,37.62778],"color":"islands#blueIcon","source":"GAC GS3 т363тр797, moscow","radius":null,"type":"user","vehicleName":"GAC GS3 т363тр797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">GAC GS3 т363тр797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> GAC GS3 т363тр797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.734455, 37.627780</div></div></div>"},{"coords":[55.429482,37.554546],"color":"islands#redIcon","source":"Skoda Rapid у766ма797, moscow","radius":737,"type":"yandex","vehicleName":"Skoda Rapid у766ма797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Skoda Rapid у766ма797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Skoda Rapid у766ма797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.429482, 37.554546</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.429482,37.554546\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.433514,37.525587],"color":"islands#blueIcon","source":"Skoda Rapid у766ма797, moscow","radius":null,"type":"user","vehicleName":"Skoda Rapid у766ма797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Skoda Rapid у766ма797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Skoda Rapid у766ма797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.433514, 37.525587</div></div></div>"},{"coords":[55.739689,37.652222],"color":"islands#redIcon","source":"Chery Tiggo 7 Pro р548оа797, moscow","radius":723,"type":"yandex","vehicleName":"Chery Tiggo 7 Pro р548оа797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro р548оа797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro р548оа797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.739689, 37.652222</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.739689,37.652222\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.748041,37.69874],"color":"islands#blueIcon","source":"Chery Tiggo 7 Pro р548оа797, moscow","radius":null,"type":"user","vehicleName":"Chery Tiggo 7 Pro р548оа797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro р548оа797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro р548оа797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.748041, 37.698740</div></div></div>"},{"coords":[60.077347,30.342682],"color":"islands#redIcon","source":"Coolray (BelGee) т128ск797, saint_petersburg","radius":412,"type":"yandex","vehicleName":"Coolray (BelGee) т128ск797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) т128ск797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) т128ск797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 60.077347, 30.342682</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"60.077347,30.342682\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[60.060382,30.462197],"color":"islands#blueIcon","source":"Coolray (BelGee) т128ск797, saint_petersburg","radius":null,"type":"user","vehicleName":"Coolray (BelGee) т128ск797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) т128ск797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) т128ск797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 60.060382, 30.462197</div></div></div>"},{"coords":[55.65736,37.841099],"color":"islands#redIcon","source":"Coolray (BelGee) у153тн797, moscow","radius":1209,"type":"yandex","vehicleName":"Coolray (BelGee) у153тн797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) у153тн797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) у153тн797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.657360, 37.841099</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.65736,37.841099\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.651294,37.849761],"color":"islands#blueIcon","source":"Coolray (BelGee) у153тн797, moscow","radius":null,"type":"user","vehicleName":"Coolray (BelGee) у153тн797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) у153тн797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) у153тн797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.651294, 37.849761</div></div></div>"},{"coords":[60.015072,30.463379],"color":"islands#redIcon","source":"Haval Jolion Elite н387ох797, saint_petersburg","radius":1350,"type":"yandex","vehicleName":"Haval Jolion Elite н387ох797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Haval Jolion Elite н387ох797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Haval Jolion Elite н387ох797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 60.015072, 30.463379</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"60.015072,30.463379\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[60.01746,30.473231],"color":"islands#blueIcon","source":"Haval Jolion Elite н387ох797, saint_petersburg","radius":null,"type":"user","vehicleName":"Haval Jolion Elite н387ох797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Haval Jolion Elite н387ох797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Haval Jolion Elite н387ох797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 60.017460, 30.473231</div></div></div>"},{"coords":[55.71365,37.622265],"color":"islands#redIcon","source":"Geely Coolray р706ма797, moscow","radius":1144,"type":"yandex","vehicleName":"Geely Coolray р706ма797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Coolray р706ма797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Coolray р706ма797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.713650, 37.622265</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.71365,37.622265\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.675848,37.614531],"color":"islands#blueIcon","source":"Geely Coolray р706ма797, moscow","radius":null,"type":"user","vehicleName":"Geely Coolray р706ма797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Coolray р706ма797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Coolray р706ма797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.675848, 37.614531</div></div></div>"},{"coords":[55.857891,37.684212],"color":"islands#redIcon","source":"Chery Arrizo 8 р268то797, moscow","radius":1106,"type":"yandex","vehicleName":"Chery Arrizo 8 р268то797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Arrizo 8 р268то797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Arrizo 8 р268то797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.857891, 37.684212</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.857891,37.684212\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.681918,37.770863],"color":"islands#blueIcon","source":"Chery Arrizo 8 р268то797, moscow","radius":null,"type":"user","vehicleName":"Chery Arrizo 8 р268то797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Arrizo 8 р268то797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Arrizo 8 р268то797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.681918, 37.770863</div></div></div>"},{"coords":[55.741438,37.632036],"color":"islands#redIcon","source":"GAC GS3 е252тм797, moscow","radius":null,"type":"yandex","vehicleName":"GAC GS3 е252тм797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">GAC GS3 е252тм797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> GAC GS3 е252тм797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.741438, 37.632036</div></div></div>"},{"coords":[59.864624,30.512745],"color":"islands#redIcon","source":"Coolray (BelGee) р911са797, saint_petersburg","radius":151,"type":"yandex","vehicleName":"Coolray (BelGee) р911са797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) р911са797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) р911са797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.864624, 30.512745</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"59.864624,30.512745\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[59.745951,30.486151],"color":"islands#blueIcon","source":"Coolray (BelGee) р911са797, saint_petersburg","radius":null,"type":"user","vehicleName":"Coolray (BelGee) р911са797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) р911са797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) р911са797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.745951, 30.486151</div></div></div>"},{"coords":[55.764896,37.59713],"color":"islands#redIcon","source":"Coolray (BelGee) е899тк797, moscow","radius":648,"type":"yandex","vehicleName":"Coolray (BelGee) е899тк797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) е899тк797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) е899тк797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.764896, 37.597130</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.764896,37.59713\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.913575,37.471637],"color":"islands#blueIcon","source":"Coolray (BelGee) е899тк797, moscow","radius":null,"type":"user","vehicleName":"Coolray (BelGee) е899тк797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) е899тк797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) е899тк797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.913575, 37.471637</div></div></div>"},{"coords":[55.616543,37.780243],"color":"islands#redIcon","source":"Geely Atlas Pro т446нн797, moscow","radius":924,"type":"yandex","vehicleName":"Geely Atlas Pro т446нн797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Atlas Pro т446нн797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Atlas Pro т446нн797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.616543, 37.780243</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.616543,37.780243\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.634891,37.771213],"color":"islands#blueIcon","source":"Geely Atlas Pro т446нн797, moscow","radius":null,"type":"user","vehicleName":"Geely Atlas Pro т446нн797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Atlas Pro т446нн797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Atlas Pro т446нн797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.634891, 37.771213</div></div></div>"},{"coords":[55.694077,37.555862],"color":"islands#redIcon","source":"GAC GS3 а072тр797, moscow","radius":678,"type":"yandex","vehicleName":"GAC GS3 а072тр797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">GAC GS3 а072тр797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> GAC GS3 а072тр797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.694077, 37.555862</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.694077,37.555862\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.654596,37.523879],"color":"islands#blueIcon","source":"GAC GS3 а072тр797, moscow","radius":null,"type":"user","vehicleName":"GAC GS3 а072тр797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">GAC GS3 а072тр797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> GAC GS3 а072тр797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.654596, 37.523879</div></div></div>"},{"coords":[55.45694,37.753349],"color":"islands#redIcon","source":"Chery Tiggo 7 Pro Max New о928тх797, moscow","radius":1139,"type":"yandex","vehicleName":"Chery Tiggo 7 Pro Max New о928тх797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro Max New о928тх797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro Max New о928тх797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.456940, 37.753349</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.45694,37.753349\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.45163,37.738658],"color":"islands#blueIcon","source":"Chery Tiggo 7 Pro Max New о928тх797, moscow","radius":null,"type":"user","vehicleName":"Chery Tiggo 7 Pro Max New о928тх797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro Max New о928тх797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro Max New о928тх797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.451630, 37.738658</div></div></div>"},{"coords":[55.718197,37.501839],"color":"islands#redIcon","source":"Coolray (BelGee) н068рр797, moscow","radius":1668,"type":"yandex","vehicleName":"Coolray (BelGee) н068рр797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) н068рр797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) н068рр797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.718197, 37.501839</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.718197,37.501839\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.710559,37.504371],"color":"islands#blueIcon","source":"Coolray (BelGee) н068рр797, moscow","radius":null,"type":"user","vehicleName":"Coolray (BelGee) н068рр797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) н068рр797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) н068рр797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.710559, 37.504371</div></div></div>"},{"coords":[55.623184,37.761097],"color":"islands#redIcon","source":"Coolray (BelGee) е250то797, moscow","radius":1023,"type":"yandex","vehicleName":"Coolray (BelGee) е250то797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) е250то797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) е250то797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.623184, 37.761097</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.623184,37.761097\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.630025,37.746534],"color":"islands#blueIcon","source":"Coolray (BelGee) е250то797, moscow","radius":null,"type":"user","vehicleName":"Coolray (BelGee) е250то797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) е250то797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) е250то797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.630025, 37.746534</div></div></div>"},{"coords":[60.008183,30.381588],"color":"islands#redIcon","source":"Exeed LX о354нт797, saint_petersburg","radius":1277,"type":"yandex","vehicleName":"Exeed LX о354нт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Exeed LX о354нт797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Exeed LX о354нт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 60.008183, 30.381588</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"60.008183,30.381588\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[60.025099,30.428906],"color":"islands#blueIcon","source":"Exeed LX о354нт797, saint_petersburg","radius":null,"type":"user","vehicleName":"Exeed LX о354нт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Exeed LX о354нт797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Exeed LX о354нт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 60.025099, 30.428906</div></div></div>"},{"coords":[60.010063,30.44742],"color":"islands#redIcon","source":"Exeed LX в144оу797, saint_petersburg","radius":1875,"type":"yandex","vehicleName":"Exeed LX в144оу797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Exeed LX в144оу797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Exeed LX в144оу797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 60.010063, 30.447420</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"60.010063,30.44742\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[60.053036,30.521318],"color":"islands#blueIcon","source":"Exeed LX в144оу797, saint_petersburg","radius":null,"type":"user","vehicleName":"Exeed LX в144оу797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Exeed LX в144оу797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Exeed LX в144оу797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 60.053036, 30.521318</div></div></div>"},{"coords":[59.932796,30.288141],"color":"islands#redIcon","source":"Geely Coolray м716мт797, saint_petersburg","radius":1203,"type":"yandex","vehicleName":"Geely Coolray м716мт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Coolray м716мт797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Coolray м716мт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.932796, 30.288141</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"59.932796,30.288141\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[59.952155,30.361493],"color":"islands#blueIcon","source":"Geely Coolray м716мт797, saint_petersburg","radius":null,"type":"user","vehicleName":"Geely Coolray м716мт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Geely Coolray м716мт797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Geely Coolray м716мт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.952155, 30.361493</div></div></div>"},{"coords":[55.746754,37.686291],"color":"islands#redIcon","source":"Coolray (BelGee) е718тс797, moscow","radius":1188,"type":"yandex","vehicleName":"Coolray (BelGee) е718тс797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) е718тс797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) е718тс797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.746754, 37.686291</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.746754,37.686291\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.748645,37.694699],"color":"islands#blueIcon","source":"Coolray (BelGee) е718тс797, moscow","radius":null,"type":"user","vehicleName":"Coolray (BelGee) е718тс797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) е718тс797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) е718тс797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.748645, 37.694699</div></div></div>"},{"coords":[59.86784,30.521559],"color":"islands#redIcon","source":"Exeed LX о922ов797, saint_petersburg","radius":1345,"type":"yandex","vehicleName":"Exeed LX о922ов797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Exeed LX о922ов797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Exeed LX о922ов797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.867840, 30.521559</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"59.86784,30.521559\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[59.862794,30.493933],"color":"islands#blueIcon","source":"Exeed LX о922ов797, saint_petersburg","radius":null,"type":"user","vehicleName":"Exeed LX о922ов797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Exeed LX о922ов797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Exeed LX о922ов797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.862794, 30.493933</div></div></div>"},{"coords":[55.56501,37.647884],"color":"islands#redIcon","source":"Nissan Qashqai н991вт797, moscow","radius":1231,"type":"yandex","vehicleName":"Nissan Qashqai н991вт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Nissan Qashqai н991вт797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Nissan Qashqai н991вт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.565010, 37.647884</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.56501,37.647884\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.557811,37.594129],"color":"islands#blueIcon","source":"Nissan Qashqai н991вт797, moscow","radius":null,"type":"user","vehicleName":"Nissan Qashqai н991вт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Nissan Qashqai н991вт797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Nissan Qashqai н991вт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.557811, 37.594129</div></div></div>"},{"coords":[55.755436,37.633003],"color":"islands#redIcon","source":"Chery Tiggo 7 Pro а803нр797, moscow","radius":1561,"type":"yandex","vehicleName":"Chery Tiggo 7 Pro а803нр797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro а803нр797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro а803нр797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.755436, 37.633003</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.755436,37.633003\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.762587,37.624995],"color":"islands#blueIcon","source":"Chery Tiggo 7 Pro а803нр797, moscow","radius":null,"type":"user","vehicleName":"Chery Tiggo 7 Pro а803нр797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro а803нр797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro а803нр797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.762587, 37.624995</div></div></div>"},{"coords":[59.800125,30.164713],"color":"islands#redIcon","source":"GAC GS3 у459сн797, saint_petersburg","radius":151,"type":"yandex","vehicleName":"GAC GS3 у459сн797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">GAC GS3 у459сн797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> GAC GS3 у459сн797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.800125, 30.164713</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"59.800125,30.164713\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[59.991834,29.755368],"color":"islands#blueIcon","source":"GAC GS3 у459сн797, saint_petersburg","radius":null,"type":"user","vehicleName":"GAC GS3 у459сн797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">GAC GS3 у459сн797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> GAC GS3 у459сн797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.991834, 29.755368</div></div></div>"},{"coords":[59.974205,30.305],"color":"islands#redIcon","source":"Chery Tiggo 7 Pro н224ор797, saint_petersburg","radius":786,"type":"yandex","vehicleName":"Chery Tiggo 7 Pro н224ор797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro н224ор797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro н224ор797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.974205, 30.305000</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"59.974205,30.305\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[59.968566,30.30326],"color":"islands#blueIcon","source":"Chery Tiggo 7 Pro н224ор797, saint_petersburg","radius":null,"type":"user","vehicleName":"Chery Tiggo 7 Pro н224ор797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro н224ор797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro н224ор797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.968566, 30.303260</div></div></div>"},{"coords":[55.719021,37.621971],"color":"islands#redIcon","source":"Nissan Qashqai о322вс797, moscow","radius":1005,"type":"yandex","vehicleName":"Nissan Qashqai о322вс797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Nissan Qashqai о322вс797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Nissan Qashqai о322вс797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.719021, 37.621971</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.719021,37.621971\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.856331,37.684121],"color":"islands#blueIcon","source":"Nissan Qashqai о322вс797, moscow","radius":null,"type":"user","vehicleName":"Nissan Qashqai о322вс797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Nissan Qashqai о322вс797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Nissan Qashqai о322вс797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.856331, 37.684121</div></div></div>"},{"coords":[55.803028,37.597218],"color":"islands#redIcon","source":"Coolray (BelGee) е120тн797, moscow","radius":966,"type":"yandex","vehicleName":"Coolray (BelGee) е120тн797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) е120тн797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) е120тн797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.803028, 37.597218</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.803028,37.597218\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.869708,37.556157],"color":"islands#blueIcon","source":"Coolray (BelGee) е120тн797, moscow","radius":null,"type":"user","vehicleName":"Coolray (BelGee) е120тн797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) е120тн797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) е120тн797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.869708, 37.556157</div></div></div>"},{"coords":[55.423615,37.758625],"color":"islands#redIcon","source":"Coolray (BelGee) о242тн797, moscow","radius":1272,"type":"yandex","vehicleName":"Coolray (BelGee) о242тн797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) о242тн797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) о242тн797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.423615, 37.758625</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.423615,37.758625\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.416085,37.759659],"color":"islands#blueIcon","source":"Coolray (BelGee) о242тн797, moscow","radius":null,"type":"user","vehicleName":"Coolray (BelGee) о242тн797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) о242тн797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) о242тн797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.416085, 37.759659</div></div></div>"},{"coords":[55.726448,37.42326],"color":"islands#redIcon","source":"Coolray (BelGee) х238рт797, moscow","radius":904,"type":"yandex","vehicleName":"Coolray (BelGee) х238рт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) х238рт797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) х238рт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.726448, 37.423260</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.726448,37.42326\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.726228,37.422622],"color":"islands#blueIcon","source":"Coolray (BelGee) х238рт797, moscow","radius":null,"type":"user","vehicleName":"Coolray (BelGee) х238рт797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) х238рт797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) х238рт797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.726228, 37.422622</div></div></div>"},{"coords":[56.028797,37.863083],"color":"islands#redIcon","source":"Omoda S5 о061но797, moscow","radius":1154,"type":"yandex","vehicleName":"Omoda S5 о061но797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Omoda S5 о061но797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Omoda S5 о061но797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 56.028797, 37.863083</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"56.028797,37.863083\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.862412,37.6958],"color":"islands#blueIcon","source":"Omoda S5 о061но797, moscow","radius":null,"type":"user","vehicleName":"Omoda S5 о061но797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Omoda S5 о061но797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Omoda S5 о061но797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.862412, 37.695800</div></div></div>"},{"coords":[59.839272,30.452457],"color":"islands#redIcon","source":"Renault Arkana в943км797, saint_petersburg","radius":1463,"type":"yandex","vehicleName":"Renault Arkana в943км797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Renault Arkana в943км797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Renault Arkana в943км797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.839272, 30.452457</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"59.839272,30.452457\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[59.808164,30.066245],"color":"islands#blueIcon","source":"Renault Arkana в943км797, saint_petersburg","radius":null,"type":"user","vehicleName":"Renault Arkana в943км797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Renault Arkana в943км797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Renault Arkana в943км797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.808164, 30.066245</div></div></div>"},{"coords":[59.869373,30.525621],"color":"islands#redIcon","source":"Kia Rio х108су797, saint_petersburg","radius":1398,"type":"yandex","vehicleName":"Kia Rio х108су797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Kia Rio х108су797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Kia Rio х108су797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.869373, 30.525621</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"59.869373,30.525621\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[59.839051,30.493844],"color":"islands#blueIcon","source":"Kia Rio х108су797, saint_petersburg","radius":null,"type":"user","vehicleName":"Kia Rio х108су797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Kia Rio х108су797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Kia Rio х108су797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.839051, 30.493844</div></div></div>"},{"coords":[55.664513,38.005581],"color":"islands#redIcon","source":"Nissan Qashqai о581вк797, moscow","radius":1545,"type":"yandex","vehicleName":"Nissan Qashqai о581вк797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Nissan Qashqai о581вк797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Nissan Qashqai о581вк797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.664513, 38.005581</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.664513,38.005581\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.669631,38.006078],"color":"islands#blueIcon","source":"Nissan Qashqai о581вк797, moscow","radius":null,"type":"user","vehicleName":"Nissan Qashqai о581вк797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Nissan Qashqai о581вк797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Nissan Qashqai о581вк797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.669631, 38.006078</div></div></div>"},{"coords":[55.72942,37.676674],"color":"islands#redIcon","source":"Kia Rio м087ке797, moscow","radius":922,"type":"yandex","vehicleName":"Kia Rio м087ке797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Kia Rio м087ке797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Kia Rio м087ке797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.729420, 37.676674</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.72942,37.676674\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.733031,37.671572],"color":"islands#blueIcon","source":"Kia Rio м087ке797, moscow","radius":null,"type":"user","vehicleName":"Kia Rio м087ке797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Kia Rio м087ке797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Kia Rio м087ке797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.733031, 37.671572</div></div></div>"},{"coords":[59.859077,29.93759],"color":"islands#redIcon","source":"Renault Arkana у818еу797, saint_petersburg","radius":1665,"type":"yandex","vehicleName":"Renault Arkana у818еу797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Renault Arkana у818еу797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Renault Arkana у818еу797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.859077, 29.937590</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"59.859077,29.93759\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[59.856753,29.945939],"color":"islands#blueIcon","source":"Renault Arkana у818еу797, saint_petersburg","radius":null,"type":"user","vehicleName":"Renault Arkana у818еу797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Renault Arkana у818еу797, saint_petersburg</div><div class=\"balloon-row\"><strong>Машина:</strong> Renault Arkana у818еу797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 59.856753, 29.945939</div></div></div>"},{"coords":[55.765644,37.612366],"color":"islands#redIcon","source":"Chery Tiggo 7 Pro с607оо797, moscow","radius":994,"type":"yandex","vehicleName":"Chery Tiggo 7 Pro с607оо797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro с607оо797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro с607оо797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.765644, 37.612366</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.765644,37.612366\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.756383,37.741323],"color":"islands#blueIcon","source":"Chery Tiggo 7 Pro с607оо797, moscow","radius":null,"type":"user","vehicleName":"Chery Tiggo 7 Pro с607оо797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro с607оо797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro с607оо797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.756383, 37.741323</div></div></div>"},{"coords":[55.590157,37.740227],"color":"islands#redIcon","source":"Coolray (BelGee) е403те797, moscow","radius":1664,"type":"yandex","vehicleName":"Coolray (BelGee) е403те797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) е403те797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) е403те797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.590157, 37.740227</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.590157,37.740227\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.639991,37.798088],"color":"islands#blueIcon","source":"Coolray (BelGee) е403те797, moscow","radius":null,"type":"user","vehicleName":"Coolray (BelGee) е403те797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Coolray (BelGee) е403те797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Coolray (BelGee) е403те797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.639991, 37.798088</div></div></div>"},{"coords":[55.730293,37.641865],"color":"islands#redIcon","source":"Haval H3 о120та797, moscow","radius":568,"type":"yandex","vehicleName":"Haval H3 о120та797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Haval H3 о120та797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Haval H3 о120та797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.730293, 37.641865</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.730293,37.641865\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.731448,37.635087],"color":"islands#blueIcon","source":"Haval H3 о120та797, moscow","radius":null,"type":"user","vehicleName":"Haval H3 о120та797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Haval H3 о120та797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Haval H3 о120та797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.731448, 37.635087</div></div></div>"},{"coords":[55.786476,37.594532],"color":"islands#redIcon","source":"Renault Kaptur к147ку797, moscow","radius":763,"type":"yandex","vehicleName":"Renault Kaptur к147ку797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Renault Kaptur к147ку797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Renault Kaptur к147ку797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.786476, 37.594532</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.786476,37.594532\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.771686,37.68136],"color":"islands#blueIcon","source":"Renault Kaptur к147ку797, moscow","radius":null,"type":"user","vehicleName":"Renault Kaptur к147ку797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Renault Kaptur к147ку797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Renault Kaptur к147ку797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.771686, 37.681360</div></div></div>"},{"coords":[55.656441,37.83654],"color":"islands#redIcon","source":"Chery Tiggo 7 Pro м502от797, moscow","radius":783,"type":"yandex","vehicleName":"Chery Tiggo 7 Pro м502от797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro м502от797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro м502от797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.656441, 37.836540</div></div>\n        <div class=\"balloon-row\" style=\"margin-top: 10px;\">\n          <button class=\"radius-toggle-btn\" \n              data-coords=\"55.656441,37.83654\" \n              data-action=\"show\"\n              style=\"background: #1a73e8; color: white; border: none; padding: 8px 12px; cursor: pointer; border-radius: 4px; font-size: 14px;\">\n            Показать радиус вышки\n          </button>\n        </div>\n      </div>"},{"coords":[55.646644,37.7391],"color":"islands#blueIcon","source":"Chery Tiggo 7 Pro м502от797, moscow","radius":null,"type":"user","vehicleName":"Chery Tiggo 7 Pro м502от797","balloonHtml":"<div class=\"balloon\"><div class=\"balloon-title\">Chery Tiggo 7 Pro м502от797, moscow</div><div class=\"balloon-row\"><strong>Машина:</strong> Chery Tiggo 7 Pro м502от797</div><div class=\"balloon-row\"><strong>Координаты:</strong> 55.646644, 37.739100</div></div></div>"}];

        function decodeHtml(html) {
        const txt = document.createElement("textarea");
        txt.innerHTML = html;
        return txt.value;
      }
      
      const map = new ymaps.Map("map", {
        center: [55.751574, 37.573856],
        zoom: 10
      });
      
      const towerClusterer = new ymaps.Clusterer({preset: 'islands#redClusterIcons'});
      const towerCircles = new ymaps.GeoObjectCollection();
      const blockClusterer = new ymaps.Clusterer({preset: 'islands#blueClusterIcons'});
      const o2rClusterer = new ymaps.Clusterer({preset: 'islands#violetClusterIcons'});
      const userCollection = new ymaps.GeoObjectCollection();

      const circleStorage = new Map();
      const circleVisibilityState = new Map();

      console.log('=== ДЕБАГГИНГ ===');
      console.log('Всего точек:', points.length);

      function toggleCircle(coordsKey, show = true) {
        const circle = circleStorage.get(coordsKey);
        if (circle) {
          if (show) {
            map.geoObjects.add(circle);
          } else {
            map.geoObjects.remove(circle);
          }
        }
      }
      
      if (points && points.length > 0) {
        points.forEach(function(point) {
          if (!point.coords || !Array.isArray(point.coords)) return;

          if (point.radius && point.type.includes("yandex")) {
            const circle = new ymaps.Circle([

              point.coords,
              point.radius

            ], {}, {
              fillColor: "#FF0000",
              fillOpacity: 0.1,
              strokeColor: "#FF0000",
              strokeOpacity: 0.8,
              strokeWidth: 2
            });

            const coordsKey = point.coords.join(',');
            circleStorage.set(coordsKey, circle);
          }
          

          const placemark = new ymaps.Placemark(
            point.coords,
            {
              balloonContentHeader: '<div class="balloon-title">' + decodeHtml(point.source || '') + '</div>',
              balloonContentBody: point.balloonHtml ? decodeHtml(point.balloonHtml) : '',
              hintContent: decodeHtml(point.source || '')
            },
            {
              preset: point.type === 'user' ? 'islands#blueIcon' : 'islands#redCircleIcon',
              balloonCloseButton: true,
              balloonMaxWidth: 300
            }
          );

          let collection;
          if (point.type === 'yandex') {
            collection = towerClusterer;
          } else if (point.type === 'user') {
            collection = blockClusterer;
          } else {
            collection = o2rClusterer;
          }
          collection.add(placemark);
        });
        
        map.geoObjects.add(towerClusterer);
        map.geoObjects.add(o2rClusterer);
        map.geoObjects.add(userCollection);
        
        map.setBounds(map.geoObjects.getBounds(), { checkZoomRange: true });
      }
      
      document.addEventListener('click', function(e) {
        if (e.target.classList.contains('radius-toggle-btn')) {
          e.preventDefault();
          e.stopPropagation();

          const coordsStr = e.target.getAttribute('data-coords');
          const action = e.target.getAttribute('data-action');

          const circle = circleStorage.get(coordsStr);

          if (circle) {
            if (action === 'show') {
              map.geoObjects.add(circle);
              e.target.textContent = 'Скрыть радиус';
              e.target.setAttribute('data-action', 'hide');
              e.target.style.background = '#ff4444';
              circleVisibilityState.set(coordsStr, true);
            } else {
              map.geoObjects.remove(circle);
              e.target.textContent = 'Показать радиус';
              e.target.setAttribute('data-action', 'show');
              e.target.style.background = '#1a73e8';
              circleVisibilityState.set(coordsStr, false);
            }
            updateAllButtonsForCoords(coordsStr);
          }
        }
      });

      function updateAllButtonsForCoords(coordsStr) {
        const buttons = document.querySelectorAll('.radius-toggle-btn');
        const isVisible = circleVisibilityState.get(coordsStr) || false;
    
        buttons.forEach(button => {
          if (button.getAttribute('data-coords') === coordsStr) {
            if (isVisible) {
              button.textContent = 'Скрыть радиус';
              button.setAttribute('data-action', 'hide');
              button.style.background = '#ff4444';
            } else {
              button.textContent = 'Показать радиус';
              button.setAttribute('data-action', 'show');
              button.style.background = '#1a73e8';
            }
          }
        });
      }

      map.geoObjects.events.add('balloonopen', function(e) {
        setTimeout(function() {
          const balloon = document.querySelector('.ymaps-balloon');
          if (balloon) {
            const buttons = balloon.querySelectorAll('.radius-toggle-btn');
            buttons.forEach(button => {
              const coordsStr = button.getAttribute('data-coords');
              const isVisible = circleVisibilityState.get(coordsStr) || false;
              
              if (isVisible) {
                button.textContent = 'Скрыть радиус';
                button.setAttribute('data-action', 'hide');
                button.style.background = '#ff4444';
              }
              // Если не видим, оставляем исходное состояние "Показать радиус"
            });
          }
        }, 50);
      }); 
      

      document.getElementById('tower-checkbox').addEventListener('change', function(e) {
        if (e.target.checked) {
          map.geoObjects.add(towerClusterer);
        } else {
          map.geoObjects.remove(towerClusterer);
          circleStorage.forEach((circle, coordsKey) => {
            map.geoObjects.remove(circle);
            circleVisibilityState.set(coordsKey, false);
          });
        }
      });
      
      document.getElementById('block-checkbox').addEventListener('change', function(e) {
        if (e.target.checked) {
          map.geoObjects.add(blockClusterer);
        } else {
          map.geoObjects.remove(blockClusterer);
        }
      });
      
      document.getElementById('o2r-checkbox').addEventListener('change', function(e) {
        if (e.target.checked) {
          map.geoObjects.add(o2rClusterer);
        } else {
          map.geoObjects.remove(o2rClusterer);
        }
      });
      
      document.getElementById('user-checkbox').addEventListener('change', function(e) {
        if (e.target.checked) {
          map.geoObjects.add(userCollection);
        } else {
          map.geoObjects.remove(userCollection);
        }
      });
      
      document.getElementById('search-button').addEventListener('click', function() {
        const address = document.getElementById('search-input').value.trim();
        if (!address) return;
        ymaps.geocode(address, { results: 1 }).then(function(res) {
          const first = res.geoObjects.get(0);
          if (first) {
            map.setCenter(first.geometry.getCoordinates(), 15);
          }
        });
      });
      
      document.getElementById('add-button').addEventListener('click', function() {
        const input = document.getElementById('add-input').value.trim();
        if (!input) return;
        const match = input.match(/([\d.]+)\s*,\s*([\d.]+)/);
        if (match) {
          const lat = parseFloat(match[1]);
          const lon = parseFloat(match[2]);
          addUserPoint([lat, lon], 'Ваша точка');
        } else {
          ymaps.geocode(input, { results: 1 }).then(function(res) {
            const first = res.geoObjects.get(0);
            if (first) {
              const coords = first.geometry.getCoordinates();
              addUserPoint(coords, first.getAddressLine());
            }
          });
        }
      });
      
      function addUserPoint(coords, source) {
        const placemark = new ymaps.Placemark(coords, {
          balloonContentHeader: source,
          balloonContentBody: `Координаты: ${coords[0].toFixed(6)}, ${coords[1].toFixed(6)}`,
          hintContent: source
        }, {
          preset: 'islands#blueIcon'
        });
        userCollection.add(placemark);
        map.setCenter(coords, 15);
        if (!document.getElementById('user-checkbox').checked) {
          document.getElementById('user-checkbox').checked = true;
          map.geoObjects.add(userCollection);
        }
      }
      
      const sidebar = document.getElementById('sidebar');
      sidebar.style.display = 'none';
      document.getElementById('menu-button').addEventListener('click', function() {
        sidebar.style.display = sidebar.style.display === 'none' ? 'block' : 'none';
      });

      function initBalloonObserver() {
        const observer = new MutationObserver(function(mutations) {
          mutations.forEach(function(mutation) {
            if (mutation.addedNodes.length) {
              mutation.addedNodes.forEach(function(node) {
                if (node.nodeType === 1) {
                  const buttons = node.querySelectorAll ? node.querySelectorAll('.radius-toggle-btn') : [];
                  buttons.forEach(button => {
                    const coordsStr = button.getAttribute('data-coords');
                    const isVisible = circleVisibilityState.get(coordsStr) || false;
                    
                    console.log('Наблюдатель: найдена кнопка', coordsStr, 'видим:', isVisible);
                    
                    if (isVisible) {
                      button.textContent = 'Скрыть радиус';
                      button.setAttribute('data-action', 'hide');
                      button.style.background = '#ff4444';
                    }
                  });
                }
              });
            }
          });
        });

        observer.observe(document.body, {
          childList: true,
          subtree: true
        });
      }

      setTimeout(initBalloonObserver, 1000);
    });
  </script>
</body>
</html>